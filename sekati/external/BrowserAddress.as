/** * sekati.external.BrowserAddress * @version 1.0.5 * @author jason m horwitz | sekati.com * Copyright (C) 2008  jason m horwitz, Sekat LLC. All Rights Reserved. * Released under the MIT License: http://www.opensource.org/licenses/mit-license.php */package sekati.external {	import sekati.log.Logger;	import sekati.utils.StringUtil;	import sekati.utils.TypeEnforcer;		/**	 * BrowserAddress provides <i>basic</i> deeplinking through URL anchor getters and setters.	 * 	 * <p>While not as powerful or full-featured as <code>BrowserManager</code> or <code>SWFAddress</code> it is far easier	 * to implement and support as there is no need to write back/forward code-jumps from all points in the site but only 	 * during initialization. The model:<ol>	 * <li>Check for hashbang anchor links during App initialization & respond with jump code when appropriate.</li>	 * <li>Set links as the user drills down to key points in the site or application experience</li>	 * </ol></p> 	 * 	 * @see sekati.managers.BrowserManager	 */	public class BrowserAddress {		protected static var baseURL : String = ExternalBase.safeWrappedCall( "document.location.href.split('#!/')[0];" );		protected static var baseTitle : String = ExternalBase.safeWrappedCall( "document.title;" );				/**		 * Returns value of the hashbang _anchor		 */		public static function get anchor() : String {			var js : String = "return document.location.href.split( '#!/' )[1];";			/*			var js : String = "var path = window.location.href.split('#')[1];";			js += "var parr = (path && path.length > 0) ? sekati.util.cleanArray( path.split('/') ) : [];";			js += "if(parr.length > 0) { if(parr[0].indexOf('!') > -1) { parr.splice(0,1); return parr; }}";			 */			return ExternalBase.safeWrappedCall( js );		}		/*** @private */		public static function set anchor(val : String) : void {			val = (!StringUtil.beginsWith( val, '/' )) ? val : val.substr( 1, val.length - 1 );			var js : String = "document.location.href = document.location.href.split('#!/')[0] + '#!/" + val + "';";			ExternalBase.safeWrappedCall( js );			Logger.$.info( BrowserAddress, "* BrowserAddress.anchor => '" + val + "'" );		}		/**		 * Returns value of property		 */		public static function get title() : String {			var js : String = "return document.title;";			return ExternalBase.safeWrappedCall( js );		}		/*** @private */		public static function set title(val : String) : void {			var js : String = "document.title = '" + val + "';";			ExternalBase.safeWrappedCall( js );			Logger.$.info( BrowserAddress, "* BrowserAddress.title => '" + val + "'" );		}		/**		 * Return the full Browser URL		 */		public static function get href() : String {			var js : String = "return document.location.href;";			return ExternalBase.safeWrappedCall( js );		}				/**		 * Move forward in the browser history.		 */		public static function forward() : void {			var js : String = "return window.history.forward();";			ExternalBase.safeWrappedCall( js );					}				/**		 * Move back in the browser history.		 */		public static function back() : void {			var js : String = "return window.history.back();";			ExternalBase.safeWrappedCall( js );					}			/**		 * BrowserAddress Static Constructor		 */		public function BrowserAddress() {			TypeEnforcer.enforceStatic( BrowserAddress );		}	}}